{% extends "blogs/base.html" %}

{% block title %}ç™»å½• - æˆ‘çš„åšå®¢{% endblock %}

{% block content %}
<div style="max-width: 400px; margin: 0 auto;">
    <h1 style="margin-bottom: 2rem; text-align: center;">ğŸ” ç”¨æˆ·ç™»å½•</h1>
    
    {% if form.errors %}
        <div style="background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
            <p style="margin: 0;">
                <strong>âŒ ç™»å½•å¤±è´¥ï¼</strong><br>
                ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®ï¼Œè¯·é‡è¯•ã€‚
            </p>
        </div>
    {% endif %}
    
    {% if next %}
        {% if user.is_authenticated %}
            <div style="background: #fff3cd; color: #856404; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                <p style="margin: 0;">
                    <strong>âš ï¸ æƒé™ä¸è¶³</strong><br>
                    æ‚¨çš„è´¦æˆ·æ²¡æœ‰è®¿é—®æ­¤é¡µé¢çš„æƒé™ã€‚
                </p>
            </div>
        {% else %}
            <div style="background: #d1ecf1; color: #0c5460; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                <p style="margin: 0;">
                    <strong>â„¹ï¸ ç™»å½•æç¤º</strong><br>
                    è¯·å…ˆç™»å½•ä»¥è®¿é—®æ­¤é¡µé¢ã€‚
                </p>
            </div>
        {% endif %}
    {% endif %}
    
    <form method="post" action="{% url 'login' %}" 
          style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        {% csrf_token %}
        
        <!-- ç”¨æˆ·åå­—æ®µ -->
        <div style="margin-bottom: 1.5rem;">
            <label for="id_username" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #333;">
                ç”¨æˆ·å
            </label>
            <input type="text" 
                   name="username" 
                   id="id_username" 
                   required
                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;"
                   placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                   autofocus>
        </div>
        
        <!-- å¯†ç å­—æ®µ -->
        <div style="margin-bottom: 2rem;">
            <label for="id_password" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #333;">
                å¯†ç 
            </label>
            <input type="password" 
                   name="password" 
                   id="id_password" 
                   required
                   style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;"
                   placeholder="è¯·è¾“å…¥å¯†ç ">
        </div>
        
        <!-- éšè—çš„nextå­—æ®µ -->
        {% if next %}
            <input type="hidden" name="next" value="{{ next }}">
        {% endif %}
        
        <!-- æäº¤æŒ‰é’® -->
        <button type="submit" 
                style="width: 100%; padding: 0.75rem; background: #667eea; color: white; border: none; border-radius: 4px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background 0.3s;">
            ç™»å½•
        </button>
    </form>
    
    <!-- æ³¨å†Œé“¾æ¥ -->
    <div style="text-align: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #eee;">
        <p style="color: #666; margin-bottom: 0.5rem;">
            è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ
        </p>
        <a href="{% url 'blogs:register' %}" 
           style="color: #667eea; text-decoration: none; font-weight: 500;">
            ç«‹å³æ³¨å†Œ â†’
        </a>
    </div>
    
    <!-- å¿˜è®°å¯†ç æç¤º -->
    <div style="margin-top: 1rem; text-align: center;">
        <small style="color: #999;">
            ï¼ˆæ­¤æ¼”ç¤ºé¡¹ç›®ä¸æ”¯æŒå¯†ç é‡ç½®åŠŸèƒ½ï¼‰
        </small>
    </div>
</div>

{% block extra_js %}
<script>
    // è‡ªåŠ¨èšç„¦åˆ°ç”¨æˆ·åè¾“å…¥æ¡†
    document.addEventListener('DOMContentLoaded', function() {
        const usernameInput = document.getElementById('id_username');
        if (usernameInput) {
            usernameInput.focus();
        }
    });
</script>
{% endblock %}
{% endblock %}