{% extends "blogs/base.html" %}

{% block title %}å†™æ–°æ–‡ç«  - æˆ‘çš„åšå®¢{% endblock %}

{% block content %}
    <div style="max-width: 800px; margin: 0 auto;">
        <h1 style="margin-bottom: 2rem;">âœï¸ å†™æ–°æ–‡ç« </h1>
        
        <form method="post" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
            {% csrf_token %}
            
            {% for field in form %}
                <div style="margin-bottom: 1.5rem;">
                    <label for="{{ field.id_for_label }}" 
                           style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #333;">
                        {{ field.label }}
                        {% if field.field.required %}
                            <span style="color: #e74c3c;">*</span>
                        {% endif %}
                    </label>
                    
                    {{ field }}
                    
                    {% if field.help_text %}
                        <div style="margin-top: 0.25rem; font-size: 0.9rem; color: #666;">
                            ğŸ’¡ {{ field.help_text }}
                        </div>
                    {% endif %}
                    
                    {% if field.errors %}
                        <div style="margin-top: 0.5rem; color: #e74c3c; font-size: 0.9rem;">
                            âŒ {{ field.errors|striptags }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #eee;">
                <button type="submit" 
                        style="padding: 0.75rem 2rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">
                    å‘å¸ƒæ–‡ç« 
                </button>
                <a href="{% url 'blogs:index' %}" 
                   style="padding: 0.75rem 2rem; background: #f0f0f0; color: #666; text-decoration: none; border-radius: 4px; font-weight: 500;">
                    å–æ¶ˆ
                </a>
            </div>
        </form>
        
        <!-- å†™ä½œæç¤º -->
        <div style="margin-top: 2rem; background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #4CAF50;">
            <h4 style="margin-bottom: 0.5rem; color: #2e7d32;">ğŸ“ å†™ä½œæç¤º</h4>
            <ul style="color: #666; padding-left: 1.5rem;">
                <li>æ ‡é¢˜åº”è¯¥ç®€æ´æ˜äº†ï¼Œèƒ½æ¦‚æ‹¬æ–‡ç« ä¸»é¢˜</li>
                <li>å†…å®¹å¯ä»¥ä½¿ç”¨ Markdown è¯­æ³•è¿›è¡Œæ’ç‰ˆ</li>
                <li>é€‚å½“ä½¿ç”¨æ®µè½ã€åˆ—è¡¨å’Œæ ‡é¢˜è®©æ–‡ç« æ›´æ˜“è¯»</li>
                <li>å‘å¸ƒå‰è¯·æ£€æŸ¥æ˜¯å¦æœ‰é”™åˆ«å­—</li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    // å­—ç¬¦è®¡æ•°å™¨
    document.addEventListener('DOMContentLoaded', function() {
        const titleInput = document.querySelector('#id_title');
        const textInput = document.querySelector('#id_text');
        
        // å­—ç¬¦è®¡æ•°å™¨
        if (titleInput) {
            const counter = document.createElement('div');
            counter.style.marginTop = '0.25rem';
            counter.style.fontSize = '0.9rem';
            counter.style.color = '#666';
            titleInput.parentNode.insertBefore(counter, titleInput.nextSibling);
            
            function updateCounter() {
                const remaining = 200 - titleInput.value.length;
                counter.textContent = `å‰©ä½™å­—æ•°ï¼š${remaining}`;
                counter.style.color = remaining < 20 ? '#e74c3c' : '#666';
            }
            
            titleInput.addEventListener('input', updateCounter);
            updateCounter();
        }
        
        // è‡ªåŠ¨è°ƒæ•´æ–‡æœ¬æ¡†é«˜åº¦
        if (textInput) {
            function adjustHeight() {
                textInput.style.height = 'auto';
                textInput.style.height = (textInput.scrollHeight) + 'px';
            }
            
            textInput.addEventListener('input', adjustHeight);
            adjustHeight();
        }
    });
</script>
{% endblock %}